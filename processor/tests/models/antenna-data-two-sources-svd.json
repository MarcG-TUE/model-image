{
    "canvas": {
        "width": 250,
        "height": 250
    },
    "data": [
        ["parameters", [
            {
                "name": "alpha1",
                "type": "range",
                "initialValue": 19,
                "description": "direction of source s1",
                "range": [-90, 90],
                "step": 1
            },
            {
                "name": "strength1",
                "type": "range",
                "initialValue": 0.35,
                "description": "strength of source s1",
                "range": [0.1, 5],
                "step": 0.01
            },
            {
                "name": "alpha2",
                "type": "range",
                "initialValue": -36,
                "description": "direction of source s2",
                "range": [-90, 90],
                "step": 1
            },
            {
                "name": "noiseVariance",
                "type": "range",
                "initialValue": 0.1,
                "description": "Noise Variance",
                "range": [0, 10],
                "step": 0.01
            },
            {
                "name": "number of samples",
                "type": "range",
                "initialValue": 750,
                "description": "Number of antenna samples",
                "range": [10, 1000],
                "step": 1
            }
            ]
        ],
        ["variables", [
            {
                "name": "spanSize",
                "value": 2.5
            }
        ]],
        ["vectors", [
            {
                "name": "a1",
                "value": "SceneData.scalePoint3D(SceneData.projectedResponseVector(5, 0.5,SceneData.parameters['alpha1']), SceneData.parameters['strength1'])",
                "updateOn": ["alpha1", "strength1"]
            },
            {
                "name": "a2",
                "value": "SceneData.projectedResponseVector(5, 0.5,SceneData.parameters['alpha2'])",
                "updateOn": ["alpha2"]
            }
            ]
        ],
        ["randomData", {
            "name": "signals",
            "length": 2,
            "type": "gaussian",
            "numberOfSamples": "SceneData.parameters['number of samples']",
            "updateOn": ["number of samples"]
        }],
        ["randomData", {
            "name": "noise",
            "length": 3,
            "type": "gaussian",
            "numberOfSamples": "SceneData.parameters['number of samples']",
            "updateOn": ["number of samples"]
        }]
    ],
    "elements": [
        [ "axis-3d",
            {
                "type": "Perspective8Q",
                "position": [5,5,5],
                "target": [0,0,0],
                "fieldOfView": 45,
                "xDom": [-2.5,2.5],
                "yDom": [-2.5,2.5],
                "zDom": [-2.5,2.5],
                "center": [125,125],
                "scale": 270,
                "content": [
                    [ "dataset", {
                        "points": "SceneData.addPoints3D(SceneData.randomData.signals.map(p=>SceneData.addPoint3D(SceneData.scalePoint3D(SceneData.vectors.a1, p[0]),SceneData.scalePoint3D(SceneData.vectors.a2, p[1]))),SceneData.scalePoints3D(SceneData.randomData.noise,Math.sqrt(SceneData.parameters.noiseVariance)))",
                        "normals": {
                            "direction": "SceneData.perpendicularVector(SceneData.vectors.a1, SceneData.vectors.a2)",
                            "attributes": {
                                "stroke-width": 0.4,
                                "stroke": "#ff00ff",
                                "stroke-dasharray": "4 1"
                            }
                        },
                        "oneSide": {
                            "side": "back",
                            "axis1": "SceneData.vectors.a1",
                            "axis2": "SceneData.vectors.a2"
                        },
                        "radius": 0.03,
                        "attributes": {
                            "fill": "#00aa00"
                        },
                        "updateOn": ["alpha1", "alpha2", "strength1", "noiseVariance", "number of samples"]
                    }],
                    ["span2D", {
                        "axis1": "SceneData.scalePoint3D(SceneData.vectors.a1, SceneData.variables.spanSize/SceneData.parameters.strength1)",
                        "axis2": "SceneData.scalePoint3D(SceneData.vectors.a2, SceneData.variables.spanSize)",
                        "updateOn": ["alpha1", "alpha2", "strength1"]
                        }],
                    ["vectors", {
                        "vectors": [
                            {
                                "p1": [0,0,0],
                                "p2": "SceneData.vectors.a1"
                            },
                            {
                                "p1": [0,0,0],
                                "p2": "SceneData.vectors.a2"
                            }
                        ],
                        "attributes": {
                            "stroke":  "#aa00aa",
                            "stroke-width": 1.5
                        },
                        "updateOn": ["alpha1", "alpha2", "strength1"]
                        }
                    ],
                    [ "dataset", {
                            "points": "SceneData.addPoints3D(SceneData.randomData.signals.map(p=>SceneData.addPoint3D(SceneData.scalePoint3D(SceneData.vectors.a1, p[0]),SceneData.scalePoint3D(SceneData.vectors.a2, p[1]))),SceneData.scalePoints3D(SceneData.randomData.noise,Math.sqrt(SceneData.parameters.noiseVariance)))",
                            "normals": {
                                "direction": "SceneData.perpendicularVector(SceneData.vectors.a1, SceneData.vectors.a2)",
                                "attributes": {
                                    "stroke-width": 0.4,
                                    "stroke": "#ff00ff",
                                    "stroke-dasharray": "4 1"
                                    }
                            },
                            "oneSide": {
                                "side": "front",
                                "axis1": "SceneData.vectors.a1",
                                "axis2": "SceneData.vectors.a2"
                            },
                            "radius": 0.035,
                            "attributes": {
                                "fill": "#00aa00"
                            },
                            "updateOn": ["alpha1", "alpha2", "strength1", "noiseVariance", "number of samples"]
                        }
                    ],
                    ["lines", {
                        "lines": [
                            {
                                "p1": [0,0,0],
                                "p2": [-2.5,0,0]
                            },{
                                "p1": [0,0,0],
                                "p2": [0,2.5,0]
                            },{
                                "p1": [0,0,0],
                                "p2": [0,0,2.5]
                            }
                        ],
                        "attributes": {
                            "stroke":  "#000000",
                            "stroke-width": 1.5
                        }}]
                ]
            }
        ]
    ]
}